"use strict";exports.id=864,exports.ids=[864],exports.modules={17479:(e,t,r)=>{r.d(t,{n:()=>i});var a=r(6475);let i=(0,a.createServerReference)("40516ae740e393ad4fb1aa5fac453bc1de2c1759a1",a.callServer,void 0,a.findSourceMapURL,"summarizeAndSpeak")},18116:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(60687),i=r(43210),o=r(24851),s=r(4780);let n=i.forwardRef(({className:e,...t},r)=>(0,a.jsxs)(o.bL,{ref:r,className:(0,s.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[(0,a.jsx)(o.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(o.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(o.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));n.displayName=o.bL.displayName},31298:(e,t,r)=>{r.d(t,{E:()=>i});var a=r(6475);let i=(0,a.createServerReference)("40a33638a1c42855ddf9416a6461adf9ff582edba8",a.callServer,void 0,a.findSourceMapURL,"generateLesson")},50812:(e,t,r)=>{r.d(t,{C:()=>l,z:()=>c});var a=r(60687),i=r(43210),o=r(14555),s=r(73256),n=r(4780);let c=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(o.bL,{className:(0,n.cn)("grid gap-2",e),...t,ref:r}));c.displayName=o.bL.displayName;let l=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(o.q7,{ref:r,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,a.jsx)(o.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(s.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));l.displayName=o.q7.displayName},56896:(e,t,r)=>{r.d(t,{S:()=>c});var a=r(60687),i=r(43210),o=r(40211),s=r(58450),n=r(4780);let c=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(o.bL,{ref:r,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,a.jsx)(o.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(s.A,{className:"h-4 w-4"})})}));c.displayName=o.bL.displayName},66351:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{E:()=>d});var i=r(91199);r(42087);var o=r(95427),s=r(37612),n=r(93365),c=r(33331),l=e([o,n]);[o,n]=l.then?(await l)():l;let u=s.z.object({quizType:s.z.enum(["multiple-choice"]),question:s.z.string().describe("The multiple-choice question."),options:s.z.array(s.z.string()).describe("An array of possible answers."),answer:s.z.union([s.z.string(),s.z.array(s.z.string())]).describe("The correct answer or an array of correct answers if there are multiple.")}),f=s.z.object({quizType:s.z.enum(["written-question"]),question:s.z.string().describe("The open-ended exam-style question."),marks:s.z.number().min(1).max(4).describe("The number of marks the question is worth (1-4)."),answer:s.z.string().describe("A concise, ideal answer to the question that can be used for checking.")}),m=s.z.object({quizType:s.z.enum(["fill-in-the-blanks"]),sentence:s.z.string().describe('A sentence with a key term replaced by "______" (six underscores).'),answer:s.z.string().describe("The word that was removed from the sentence.")}),h=s.z.object({title:s.z.string().describe("A short, engaging title for this section of the lesson."),content:s.z.string().describe("The main educational content for this slide, formatted as HTML. This should be detailed and well-explained."),quiz:s.z.union([u,f,m]).describe("A quiz question to test understanding of the content on this slide. This can be multiple-choice, a written question, or fill-in-the-blanks."),videoUrl:s.z.string().optional().describe("A relevant YouTube video URL for this slide.")}),p=s.z.object({topic:s.z.string().describe("The topic or subject matter for which to generate the lesson.")}),b=s.z.object({title:s.z.string().describe("The overall title of the lesson."),objectives:s.z.array(s.z.string()).describe("A list of clear learning objectives for the lesson."),introduction:s.z.string().describe("An engaging introduction to the topic, formatted as HTML."),slides:s.z.array(h).describe('An array of lesson "slides", each covering a part of the topic.'),summary:s.z.string().describe("A final summary of the key points of the lesson, formatted as HTML.")});async function d(e){return await y(e)}let g=o.ai.definePrompt({name:"generateLessonPrompt",input:{schema:p},output:{schema:b},tools:[n.o],model:"googleai/gemini-2.5-flash",prompt:`You are an expert Edexcel GCSE History teacher. Your task is to create a complete, engaging, and detailed lesson plan for the given topic, ensuring all content is strictly aligned with the Edexcel GCSE History curriculum. You must use effective teaching techniques to help a student learn and retain information.

Topic: {{{topic}}}

Structure the lesson as follows:
1.  **Title:** A clear, concise title for the lesson.
2.  **Learning Objectives:** Create a list of 3-4 specific, measurable learning objectives from the Edexcel syllabus.
3.  **Introduction:** Write an engaging introduction. Use an analogy or a real-world example to connect the topic to something the student already knows.
4.  **Slides:** Break the main content into 5-7 distinct "slides". Each slide must have:
    *   A **title**.
    *   Detailed **content** explaining a core concept, formatted in simple HTML (using <h2>, <h3>, <p>, <ul>, <li>, <strong>).
    *   A **quiz** to check for understanding. You MUST vary the quiz type on each slide, choosing randomly between 'multiple-choice', 'written-question', and 'fill-in-the-blanks'.
        - For 'multiple-choice', occasionally use multiple correct answers.
        - For 'written-question', keep it concise (2-4 marks).
        - For 'fill-in-the-blanks', use "______" for the blank space.
    *   **Video:** For each slide, use the searchYoutube tool to find a short, relevant video clip from either 'Mr. Allsop History', 'History Bombs' or 'Simple History' that explains the concept on the slide. Add the URL to the 'videoUrl' field.
5.  **Summary:** Conclude with a summary of the most crucial points from the lesson.

**Teaching Style & Formatting:**
*   Be clear, encouraging, and easy to understand for a 15-16 year old.
*   Break down complex ideas into simple, manageable steps.
*   Wrap all key historical terms, people, and dates in <strong> tags.

Generate the lesson plan based on these instructions.`}),y=o.ai.defineFlow({name:"generateLessonFlow",inputSchema:p,outputSchema:b},async e=>{let t=0;for(;t<3;)try{let{output:t}=await g(e);if(t)return t;throw Error("Generated lesson output was empty.")}catch(e){if(t++,console.log(`Attempt ${t} failed. Retrying...`,e),t>=3)throw Error("Failed to generate lesson after multiple retries.");await new Promise(e=>setTimeout(e,1500*t))}throw Error("Failed to generate lesson after multiple retries.")});(0,c.D)([d]),(0,i.A)(d,"40a33638a1c42855ddf9416a6461adf9ff582edba8",null),a()}catch(e){a(e)}})},68842:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{"4003af2b6978aee3907a67d9849ac90c92cbd7575c":()=>i.T,"40516ae740e393ad4fb1aa5fac453bc1de2c1759a1":()=>s.n,"40a33638a1c42855ddf9416a6461adf9ff582edba8":()=>o.E});var i=r(26174),o=r(66351),s=r(81975),n=e([i,o,s]);[i,o,s]=n.then?(await n)():n,a()}catch(e){a(e)}})},80013:(e,t,r)=>{r.d(t,{J:()=>l});var a=r(60687),i=r(43210),o=r(78148),s=r(24224),n=r(4780);let c=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(o.b,{ref:r,className:(0,n.cn)(c(),e),...t}));l.displayName=o.b.displayName},81975:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{n:()=>f});var i=r(91199);r(42087);var o=r(95427),s=r(37612),n=r(34615),c=r(40608),l=r(33331),d=e([o,c]);[o,c]=d.then?(await d)():d;let m=s.z.object({content:s.z.string().describe("The full text content to be summarized and converted to speech."),topic:s.z.string().describe("The topic of the content, used for context in the summary.")}),h=s.z.object({audio:s.z.string().describe("The base64 encoded WAV audio data URI of the summarized podcast.")});async function u(e,t=1,r=24e3,a=2){return new Promise((i,o)=>{let s=new n.Writer({channels:t,sampleRate:r,bitDepth:8*a}),c=[];s.on("error",o),s.on("data",function(e){c.push(e)}),s.on("end",function(){i(Buffer.concat(c).toString("base64"))}),s.write(e),s.end()})}let p=o.ai.defineFlow({name:"summarizeAndSpeakFlow",inputSchema:m,outputSchema:h},async({content:e,topic:t})=>{let r,a=0;for(;a<=2;)try{let a=await o.ai.generate({prompt:`You are an expert science communicator. Your task is to take the following raw lesson content about "${t}" and turn it into a clear and concise podcast script. The script should flow naturally as spoken audio. Explain the core concepts and finish with a quick summary of the key takeaways. Be brief.
        
              Raw Content:
              \`\`\`
              ${e}
              \`\`\`
              `,output:{schema:s.z.object({script:s.z.string().describe("The generated podcast script.")})}});if(r=a.output?.script)break}catch(e){if(++a>2)throw console.error("Final summary attempt failed:",e),e;await new Promise(e=>setTimeout(e,1e3*a))}if(!r)throw Error("Failed to generate a summary script after multiple retries.");for(a=0;a<=2;)try{let{media:e}=await o.ai.generate({model:c.googleAI.model("gemini-2.5-flash-preview-tts"),config:{responseModalities:["AUDIO"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Algenib"}}}},prompt:r});if(!e)throw Error("no media returned from TTS model");let t=Buffer.from(e.url.substring(e.url.indexOf(",")+1),"base64"),a=await u(t);return{audio:"data:audio/wav;base64,"+a}}catch(e){if(++a>2)throw console.error("Final speech generation attempt failed:",e),e;await new Promise(e=>setTimeout(e,1e3*a))}throw Error("Failed to generate speech after multiple retries.")});async function f(e){return p(e)}(0,l.D)([f]),(0,i.A)(f,"40516ae740e393ad4fb1aa5fac453bc1de2c1759a1",null),a()}catch(e){a(e)}})},91821:(e,t,r)=>{r.d(t,{Fc:()=>c,TN:()=>d,XL:()=>l});var a=r(60687),i=r(43210),o=r(24224),s=r(4780);let n=(0,o.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=i.forwardRef(({className:e,variant:t,...r},i)=>(0,a.jsx)("div",{ref:i,role:"alert",className:(0,s.cn)(n({variant:t}),e),...r}));c.displayName="Alert";let l=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h5",{ref:r,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));l.displayName="AlertTitle";let d=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},93365:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{o:()=>l});var i=r(91199);r(42087);var o=r(95427),s=r(68567),n=r(33331),c=e([o]);let l=(o=(c.then?(await c)():c)[0]).ai.defineTool({name:"searchYoutube",description:"Searches for a YouTube video from 'freesciencelessons' or 'Cognito' channels about a specific science topic.",inputSchema:s.z.object({query:s.z.string().describe('A simple search query, e.g., "cell biology" or "atomic structure".')}),outputSchema:s.z.object({url:s.z.string().describe("The URL of the most relevant video.")})},async e=>{console.log(`Searching YouTube for: ${e.query}`);let t=encodeURIComponent(`${e.query} (site:youtube.com/c/Cognitoedu OR site:youtube.com/c/Freesciencelessons)`);return{url:`https://www.youtube.com/results?search_query=${t}`}});(0,n.D)([l]),(0,i.A)(l,"7fdf2787f1fea9c90c7b424002998f21714fc794fd",null),a()}catch(e){a(e)}})}};